{"componentChunkName":"component---src-templates-blog-post-js","path":"/blog/post4/","webpackCompilationHash":"","result":{"data":{"markdownRemark":{"html":"<p>As part of my Software Engineering degree, the <a href=\"https://uwaterloo.ca/capstone-design/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Fourth Year Design Project (FYDP) or Capstone</a> is a year long group project to conceptualize and design a software project. My group members (Holly, Bhavika, Riley, Samuel) and I decided to create a new product in the area of data visualization and user experience.</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2752/1*ncewmJcZEgU2kyKIpDQQTA.png\" alt=\"Illustration from [unDraw](https://undraw.co/)\"></p>\n<p>This report outlines the product vision for Blimp, technical architecture and focuses on the frontend state management aspect of the application, especially the theming and widget functionality.</p>\n<h2>What is Blimp?</h2>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/0*5Lbca-0b_GFRGWJS.jpeg\" alt=\"CP24, a Toronto-based TV news channel. [Source](https://www.cp24.com/polopoly_fs/1.974354.1348779206!/httpImage/image.jpeg_gen/derivatives/landscape_620/image.jpeg)\"></p>\n<p>Blimp is a platform used to create personalized dashboards or “blimps”. With a focus on the user experience, customizability, ease-of-use and flexibility, Blimp lets anyone create a dashboard, create different layouts, add widgets and personalize with different themes. We also plan on making Blimp free, crowdsourced, developer friendly and easy to share, opening up customizable dashboards to the more casual user, instead of just the current business and corporate focus.</p>\n<h2>Who is it for?</h2>\n<h3>Some example use cases are</h3>\n<ul>\n<li>Individuals looking to create a one-stop shop view for information relevant to them</li>\n<li>Social media influencers who want to aggregate various platforms into one view</li>\n<li>Conferences who want to show attendees useful information at a glance</li>\n<li>Businesses that want to create personalized, dynamic and useful signage</li>\n<li>Families who want to keep all their information aggregated and display it in a useful manner</li>\n</ul>\n<p>Since Blimp will be completely customizable and developer friendly, there is an infinite amount of use cases possible with our application. With a great marketing plan, We are currently pursuing a partnership with <a href=\"https://hackthenorth.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Hack the North</a>, which will allow our app to be seen in front of 2,000+ event attendees at Canada’s biggest hackathon.</p>\n<h2>Goals and features</h2>\n<ul>\n<li>Crowdsourced/open-source widgets</li>\n<li>Free</li>\n<li>Customizable widgets</li>\n<li>Easy to use drag and drop user experience</li>\n<li>Easy to share</li>\n<li>Flexible</li>\n<li>Ability to create any kind of grid layout (including complex ones)</li>\n<li>Themable with user customization</li>\n</ul>\n<h2>Technical architecture</h2>\n<p>There are 4 main components to Blimp’s technical architecture.</p>\n<ul>\n<li><strong>Backend:</strong> Responsible for server-side application logic and storage of data</li>\n<li>**REST API: **Enables communication between the frontend and the backend</li>\n<li><strong>Frontend:</strong> Responsible for displaying information to the end user and handles interaction and state changes</li>\n</ul>\n<p><img src=\"https://cdn-images-1.medium.com/max/6980/1*1hJ7iuKUv0GEFcphaW6bOw.jpeg\" alt=\"Blimp tech stack\"></p>\n<h3>Backend</h3>\n<p><a href=\"https://www.postgresql.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**PostgreSQL</a>: **Database used to store information (e.g. users, dashboards, roles, etc.)</p>\n<p><a href=\"https://aws.amazon.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**Amazon Web Services:</a> **Server architecture used to host application and other data</p>\n<p><a href=\"https://firebase.google.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**Firebase</a>: **Used to handle authentication</p>\n<h3>REST API</h3>\n<p><a href=\"https://nodejs.org/en/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**Node.js</a>: **Server environment for our REST API built on JavaScript. Chosen based on performance benefits in comparison to other languages</p>\n<p><a href=\"https://expressjs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**Express</a>: **Web framework for creating web applications and APIs</p>\n<h3>Frontend</h3>\n<p><a href=\"https://reactjs.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**React</a>: **Library for building user interfaces</p>\n<p><a href=\"https://redux.js.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**Redux</a>: **Centralized state container and management for React. This makes it easier to split up the frontend into the presentational layer (React) and the data layer (handles in Redux) which also allows us to split up the work in an easier way</p>\n<p><a href=\"https://www.styled-components.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**Styled Components</a>: **CSS-in-JS styling. This makes it easy for us to create styles which are scoped to a React component</p>\n<p><a href=\"https://material-ui.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**Material-UI</a>**: Pre-made React components based on <a href=\"https://material.io/design/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Google’s Material Design</a>. This will allow us to quickly use pre-made components without having to implement our own</p>\n<p><a href=\"https://www.typescriptlang.org/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**TypeScript</a>**: Typed superset of JavaScript created by Microsoft. This is so that errors can be caught at compile time and reduces code quality errors</p>\n<h3>Tools</h3>\n<p><a href=\"https://www.netlify.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**Netlify</a>**: Frontend deployment workflow. Allows us to easily deploy new versions of our frontend with ease</p>\n<p><a href=\"https://www.npmjs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**npm</a>**: JavaScript package manager. Will be used to componentize our widgets and themes</p>\n<p><a href=\"https://github.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**GitHub</a>**: Source code version control, continuous integration, code reviews and team collaboration features</p>\n<p><a href=\"https://figma.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**Figma</a>**: UI design tool. Used to design our application before development</p>\n<p><a href=\"http://asana.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">**Asana</a>**: Project management tool. Used to keep track of tasks and deadlines</p>\n<h2>Widgets</h2>\n<p><img src=\"https://cdn-images-1.medium.com/max/2672/1*xwcsbLdJOS1xEIptLLskzA.png\" alt=\"Illustration from [unDraw](https://undraw.co/)\"></p>\n<p>A widget is the single-most important concept in Blimp. A widget is a responsive, customizable display of information. Without widgets our application is not useful and useful widgets will likely be the main driver of users to our application. Widgets are meant to be 100% responsive at any possible dimension, filling up all of its parent container space. Some examples of widgets are:</p>\n<ul>\n<li>Clock</li>\n<li>Calendar</li>\n<li>Social media</li>\n<li>Photo</li>\n<li>Transit departures</li>\n<li>Traffic</li>\n<li>News</li>\n<li>Weather</li>\n</ul>\n<h3>Technical specification</h3>\n<p>All of the following technical details are written using TypeScript. You can learn about the TypeScript type model here: <a href=\"https://www.typescriptlang.org/docs/handbook/interfaces.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://www.typescriptlang.org/docs/handbook/interfaces.html</a></p>\n<p><strong>Node</strong>: Our abstract base class, widget, root, page and section (root and section to be explained later all inherit from this)</p>\n<p><strong>Widget</strong>: Type used to define a single widget type (e.g. Clock, Weather)</p>\n<p>widgetType stores which widget type a given Widget object is</p>\n<p>options data object used to store user preferences/settings for a widget (e.g. timezone for a clock widget)</p>\n<p>version used for versioning purposes</p>\n<p>theme and themeOptions are used to accomplish our goal of having a theme-customizable dashboard, we allow themes to be overwritten at any node (by default they will inherit from a parent node)</p>\n<pre><code>interface Node {\n  type: string\n  theme?: string\n  themeOptions?: any\n}\n\ninterface Widget extends Node {\n  widgetType: string\n  options: any\n  version: number\n}\n\n// example\n{\n  type: 'blimp::clock',\n  options: [\n    timezone: 'America/Los-Angeles',\n    showDate: true,\n    use24HourTime: false,\n    showSeconds: false,\n  ],\n  version: 1.0.2\n}\n</code></pre>\n<h3>Widget management</h3>\n<p>Since widgets are meant to be crowdsourced and customizable, we need to find a way to be able to share widgets and allow users to customize. We decided to create a new public <a href=\"https://github.com/blimp-live/blimp-widgets\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GitHub repo</a> and package the widgets using npm which will allow us and other developers to easily contribute new widgets by opening up a pull request in the repo and importing the new version via a npm module so our frontend can access the widget.</p>\n<h2>Layouts</h2>\n<p><img src=\"https://cdn-images-1.medium.com/max/2780/0*WmDgu636cKOlXVyw.gif\" alt=\"[Source](https://www.quackit.com/pix/stock/flexbox_example_1.gif)\"></p>\n<p>Layouts are also another integral part of Blimp. We want our application to have the flexibility and power of something like <a href=\"https://www.w3schools.com/css/css3_flexbox.asp\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">CSS Flexbox</a> but the ease-of-use of a drag-and-drop interface.</p>\n<p>We decided to base our mental model of the layout based off CSS Flexbox. We will create a **section **container that will allow objects to be added but will only grow in one dimension (vertically or horizontally). They will initially be equal size but users will be able to adjust this according to their preferences. This sizing information will be stored as a relative value, which will allow that relative value to be applied to any size, thus creating powerful and responsive layouts. A user will be able to create complex grids by nesting different sections together to create powerful two dimensional grid layouts, which is represented in the data as a nested tree structure.</p>\n<p>From the user perspective, the user will see their dashboard and a widget list and will be able to drag and drop widgets. We will calculate where the widget is intended to be dropped and show helpful UI hints about how the content will reflow and we will automatically calculate where new sections will need to be added.</p>\n<p><strong>Pages</strong> is another container which will allow users to create transitions between other pages which allows the widgets to change depending on the interval, time, etc. An example is a layout created that cycles between the weather and the traffic. The weather and the traffic will each be contained in a page and an exit transition interval (i.e. 2 minutes) will be defined on each page.</p>\n<h3>Technical specification</h3>\n<p>We again have our new interfaces inheriting from <strong>Node</strong> which ensures we have a standard interface when referring to any node type (Root, Page, Section or Widget)</p>\n<p>children can hold any number of other Node types (Root, Page, Section or Widget)</p>\n<p><strong>RootNode</strong>: Node definition for the root (“entire dashboard”). Essentially acts as a container for an entire dashboard.</p>\n<p><strong>PageNode</strong>: Node definition for a page. Has a transition property which specifies how it will transition out of that page and which page it will transition to</p>\n<p><strong>SectionNode</strong>: Node definitions for a section. This can be thought of as a div with the CSS Flexbox properties. sectionDivision is used to specify which axis items inside the section will grow (vertically or horizontally). sizes will store an array (based on how many children are in a section) of relative values (likely percentages) which define how much space each node inside a section will take up (a user can drag a handle to change this)</p>\n<pre><code>interface Node {\n  type: string\n  theme?: string\n  themeOptions?: any\n}\n\ninterface RootNode extends Node {\n  children: Node[]\n}\n\ninterface PageNode extends Node {\n  children: Node[]\n  transition: any\n}\n\ninterface SectionNode extends Node {\n  children: Node[]\n  sectionDivision : 'VERTICAL' | 'HORIZONTAL'\n  sizes: number[]\n}\n\n// example\n{\n   type: 'RootNode',\n   theme: 'Google::MaterialDark',\n   themeOptions: {\n     accentColour: 'f30c0c'\n   }\n   children: [\n     {\n       type: 'SectionNode',\n       sectionDivision: 'VERTICAL',\n       sizes: [0.5, 0.5],\n       children: [\n         {\n           type: 'blimp::clock',\n           options: {\n            timezone: 'America/Los-Angeles',\n            showDate: true,\n            use24HourTime: false,\n            showSeconds: false,\n           },\n           version: 1.0.2\n         },\n         {\n           type: 'blimp::weather',\n           options: {\n             location: 'San Francisco',\n             ...       \n           },\n           version: 0.5.1\n         }     \n       ]\n     }\n   ]\n}\n</code></pre>\n<h3>Layout management</h3>\n<p>Two questions that arose during the ideation of this layout system were: how do we represent empty space in a dashboard (since widgets fill up all the empty space in its parent) and how do we share and save layouts. To solve these questions, we created the concept of an <strong>EmptyNode</strong> which serves as a placeholder, either to create empty space in a dashboard or to swap out widgets in order to share layouts.</p>\n<h2>Putting it together</h2>\n<h3>How is a dashboard stored?</h3>\n<p><img src=\"https://cdn-images-1.medium.com/max/2288/1*HfluhEqw4ubDxg99lM4vWg.png\" alt=\"Illustration from [unDraw](https://undraw.co/)\"></p>\n<p>Every dashboard is essentially a tree structure full of nodes, starting with the <strong>RootNode</strong> and containing other Page, Section and Widgets. This is represented in our state as a nested JavaScript key value object.</p>\n<p>On save and load, the dashboard contents will be serialized/deserialized and will be sent to/from the server. The server stores this information in JSON format on the dashboards table in our PostgreSQL database. When a dashboard is accessed, it will send the information to our frontend which will go into our Redux state which generates a dashboard from that state.</p>\n<h3>Redux state</h3>\n<p>Learn more about Redux type definitions here: <a href=\"https://redux.js.org/recipes/usage-with-typescript\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://redux.js.org/recipes/usage-with-typescript</a></p>\n<p>Putting it all together with Redux, we have an application state as the following:</p>\n<pre><code>user: User // stores information about the current user\nview: { // stores information about the current view\n  previousView: ViewState // for back functionality\n  selectedView: ViewState\n}\ndashboard: { // stores information about the dashboard\n  author: User  // owner of a dashboard\n  id: string\n  name: string\n  contentHistory: Node[]  // log of content for undo/redo\n  contents: Node // layout example from above\n  isFetching: boolean\n  isSaving: boolean\n  lastSave: number\n  unsavedChanges: boolean\n}\n\ninterface User {  // user model\n  imgUrl: string\n  name: string\n  token: string  // token for authentication\n}\n\ninterface ViewState {\n  editDashobard?: boolean\n  home?: boolean\n  viewDashboard?: boolean\n}\n</code></pre>\n<h3>Dashboard load example</h3>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*QmuXDdSXI5j4eLUWHyaEoQ.png\" alt=\"Example dashboard. Unable to find original source\"></p>\n<ol>\n<li>Navigate to <a href=\"https://blimp.live/stanhuan/san-francisco-dashboard\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://blimp.live/stanhuan/san-francisco-dashboard</a></li>\n<li>\n<p>App loads with our initial state (handwaving authentication)</p>\n<p>user {\nimgUrl: '<a href=\"http://www.gravatar.com/avatar/3b3be63a4c2a439b013787725dfce802?d=identicon\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.gravatar.com/avatar/3b3be63a4c2a439b013787725dfce802?d=identicon</a>'\nname: 'Stanley Huang'\ntoken: '4895u839ngnv932894f'\n}\nview: {\npreviousView: {\nhome: true\n}\nselectedView: {\nviewDashboard: true\n}\n}\ndashboard: {\nauthor: {\nimgUrl: '<a href=\"http://www.gravatar.com/avatar/3b3be63a4c2a439b013787725dfce802?d=identicon\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.gravatar.com/avatar/3b3be63a4c2a439b013787725dfce802?d=identicon</a>'\nname: 'Stanley Huang'\ntoken: '4895u839ngnv932894f'\n}\nid: '438953'\nname: 'San Francisco Dashboard'\ncontentHistory: []\ncontents: null\nisFetching: false\nisSaving: false\nlastSave: null\nunsavedChanges: false\n}</p>\n</li>\n<li>\n<p>Receive dashboard contents from the server (contents is filled with example from the layout example) the state becomes</p>\n<p>user {\nimgUrl: '<a href=\"http://www.gravatar.com/avatar/3b3be63a4c2a439b013787725dfce802?d=identicon\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.gravatar.com/avatar/3b3be63a4c2a439b013787725dfce802?d=identicon</a>'\nname: 'Stanley Huang'\ntoken: '4895u839ngnv932894f'\n}\nview: {\npreviousView: {\nhome: true\n}\nselectedView: {\nviewDashboard: true\n}\n}\ndashboard: {\nauthor: {\nimgUrl: '<a href=\"http://www.gravatar.com/avatar/3b3be63a4c2a439b013787725dfce802?d=identicon\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://www.gravatar.com/avatar/3b3be63a4c2a439b013787725dfce802?d=identicon</a>'\nname: 'Stanley Huang'\ntoken: '4895u839ngnv932894f'\n}\nid: '438953'\nname: 'San Francisco Dashboard'\ncontentHistory: [] // same as contents but omitted for now\ncontents: {\ntype: 'RootNode',\ntheme: 'Google::MaterialDark',\nthemeOptions: {\naccentColour: 'f30c0c'\n}\nchildren: [\n{\ntype: 'SectionNode',\nsectionDivision: 'VERTICAL',\nsizes: [0.5, 0.5],\nchildren: [\n{\ntype: 'blimp::clock',\noptions: {\ntimezone: 'America/Los-Angeles',\nshowDate: true,\nuse24HourTime: false,\nshowSeconds: false,\n},\nversion: 1.0.2\n},\n{\ntype: 'blimp::weather',\noptions: {\nlocation: 'San Francisco',\n...<br>\n},\nversion: 0.5.1\n}<br>\n]\n}\n]\n}\nisFetching: false\nisSaving: false\nlastSave: null\nunsavedChanges: false\n}</p>\n<pre><code>    relativeSize: 0.5,\n    children: [\n      {\n         type: 'blimp::clock',\n         options: {\n           timezone: 'America/Los-Angeles',\n           showDate: true,\n           use24HourTime: false,\n           showSeconds: false,\n         },\n         version: 1.0.2\n      },\n      {\n         type: 'blimp::weather',\n         options: {\n           location: 'San Francisco',\n           ...       \n         },\n         version: 0.5.1\n      }     \n    ]\n  }\n]\n</code></pre>\n<p>  }\nisFetching: false\nisSaving: false\nlastSave: null\nunsavedChanges: false\n}</p>\n</li>\n<li>React generates a dashboard based on this given state</li>\n</ol>\n<h2>Conclusion</h2>\n<p>In conclusion, this report outlined what Blimp, a personalized, responsive, customizable dashboard is and the high level architecture to create an application like this. Next we went in detail about the technical implementation of a widget and how the layout structure will work. Finally we put it all together and took a look at how it would appear in the Redux state and went through an example. At the time of writing this report, these were the main technical considerations of our project. We encountered these challenges and expect to encounter more because of our focus on the user experience which means doing more behind the scenes to make our application a great experience for our users.</p>\n<h2>Acknowledgement</h2>\n<p>I want to thank Holly Oegema, Bhavika Sharma, Riley Gowanlock and Samuel San, who are all part of my Capstone group and played an equal role in this project and helped me make a lot of implementation decisions.</p>","frontmatter":{"title":"Creating Blimp, a personal dashbaord experience","date":"March 03, 2019"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/blog/post4/"}}}